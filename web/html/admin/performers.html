{{ define "performers_content" }}

<div class="d-flex justify-content-between align-items-center">
    <h1 class="h2 mb-3">{{ .Title }}</h1>
</div>

<!-- –ë–ª–æ–∫ –ø–æ–∏—Å–∫–∞ –≤—Å–µ–≥–¥–∞ –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç—Å—è -->
<div class="search-container mb-3">
    <form method="GET" action="/admin/performers" class="row g-2" id="searchForm">
        <div class="col-auto">
            <label for="searchInput" style="position: relative; display: inline-block;">
                <input type="text"
                       name="search"
                       id="searchInput"
                       class="form-control form-control-sm"
                       style="width: 15ch; padding-right: 15px;"
                       placeholder="–ü–æ–∏—Å–∫ –ø–æ –¢–ù..."
                       value="{{.SearchQuery}}"
                       autocomplete="off"
                       maxlength="7">

                {{if .SearchQuery}}
                <span id="clearSearchIcon"
                      style="position: absolute; right: 8px; top: 50%; transform: translateY(-50%); cursor: pointer; color: #999; font-size: 14px;">
        ‚úó
    </span>
                {{end}}
            </label>
        </div>
    </form>

    {{ if .IsSearch }}

    <div class="alert {{ if eq .Pagination.TotalCount 0 }}alert-warning{{ else }}alert-info{{ end }} mt-2 py-1 px-3">
        <i class="bi bi-{{ if eq .Pagination.TotalCount 0 }}exclamation-triangle{{ else }}info-circle{{ end }}"></i>
        {{ if .IsSearch }}
        {{ if eq .Pagination.TotalCount 0 }}
        –ü–æ –∑–∞–ø—Ä–æ—Å—É "{{ .SearchQuery }}" –Ω–∏—á–µ–≥–æ –Ω–µ –Ω–∞–π–¥–µ–Ω–æ
        {{ else }}
        –ü–æ–∏—Å–∫ –ø–æ "{{ .SearchQuery }}". –ù–∞–π–¥–µ–Ω–æ: {{ .Pagination.TotalCount }} —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–æ–≤
        {{ end }}
        {{ else }}
        –í—Å–µ–≥–æ —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–æ–≤: {{ .Pagination.TotalCount }}
        {{ end }}
    </div>
    {{ end }}
</div>

<!-- –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –∫–æ–ª–∏—á–µ—Å—Ç–≤–µ (–ø–æ–∫–∞–∑—ã–≤–∞–µ–º —Ç–æ–ª—å–∫–æ –µ—Å–ª–∏ –µ—Å—Ç—å —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã) -->
{{ if gt .Pagination.TotalCount 0 }}
<div class="table-info mb-1">
    <span>–í—Å–µ–≥–æ —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–æ–≤: {{ .Pagination.TotalCount }}</span>
    <span>–ü–æ–∫–∞–∑–∞–Ω–æ: {{ .Pagination.StartItem }} - {{ .Pagination.EndItem }} –∏–∑ {{ .Pagination.TotalCount }}</span>
</div>
{{ end }}

<!-- –ö–∞—Ä—Ç–æ—á–∫–∞ —Å —Ç–∞–±–ª–∏—Ü–µ–π - –≤—Å–µ–≥–¥–∞ –æ—Ç–æ–±—Ä–∞–∂–∞–µ–º -->
<div class="card shadow-sm">
    <div class="card-body p-0">

        <!-- –¢–∞–±–ª–∏—Ü–∞ –∏–ª–∏ —Å–æ–æ–±—â–µ–Ω–∏–µ –æ–± –æ—Ç—Å—É—Ç—Å—Ç–≤–∏–∏ –¥–∞–Ω–Ω—ã—Ö -->
        {{ if gt .Pagination.TotalCount 0 }}
        <div class="table-responsive" style="min-width: 1200px;">
            <!-- –î–æ–±–∞–≤–ª—è–µ–º –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä –¥–ª—è —Å–∫—Ä–æ–ª–ª–∞ -->
            <div style="height: calc(100vh - 400px); overflow-y: auto;">
                <table class="table table-hover mb-0" style="min-width: 1200px;" id="performersTable">
                    <colgroup>
                        <col style="width: 60px;">  <!-- –¢–ù -->
                        <col style="width: 220px;"> <!-- –§–ò–û -->
                        <col style="width: 100px;"> <!-- –ö–æ–¥ –¥–æ—Å—Ç—É–ø–∞ -->
                        <col style="width: 60px;"> <!-- –ü–∞—Ä–æ–ª—å -->
                        <col style="width: 110px;"> <!-- –†–æ–ª—å Forms -->
                        <col style="width: 110px;"> <!-- –†–æ–ª—å FGW -->
                        <col style="width: 90px;">  <!-- –°—Ç–∞—Ç—É—Å -->
                        <col style="width: 120px;"> <!-- –î–∞—Ç–∞ —Å–æ–∑–¥–∞–Ω–∏—è -->
                        <col style="width: 60px;">  <!-- –¢–ù –≤–ª–∞–¥–µ–ª—å—Ü–∞ (—Å–æ–∑–¥.) -->
                        <col style="width: 120px;"> <!-- –î–∞—Ç–∞ –∏–∑–º–µ–Ω–µ–Ω–∏—è -->
                        <col style="width: 60px;">  <!-- –¢–ù –≤–ª–∞–¥–µ–ª—å—Ü–∞ (–∏–∑–º.) -->
                        <col style="width: 140px;"> <!-- –û–ø–µ—Ä–∞—Ü–∏–∏ (—É–≤–µ–ª–∏—á–µ–Ω–∞ —à–∏—Ä–∏–Ω–∞) -->
                    </colgroup>
                    <thead class="table-light">
                    <tr>
                        <th class="text-nowrap">–¢–ù</th>
                        <th class="text-nowrap">–§–ò–û</th>
                        <th class="text-nowrap">–ö–æ–¥ –¥–æ—Å—Ç—É–ø–∞</th>
                        <th class="text-nowrap">–ü–∞—Ä–æ–ª—å</th>
                        <th class="text-nowrap">–†–æ–ª—å Forms</th>
                        <th class="text-nowrap">–†–æ–ª—å FGW</th>
                        <th class="text-nowrap">–°—Ç–∞—Ç—É—Å</th>
                        <th class="text-nowrap">–î–∞—Ç–∞ —Å–æ–∑–¥–∞–Ω–∏—è</th>
                        <th class="text-nowrap text-center">–¢–ù<br>–≤–ª–∞–¥–µ–ª—å—Ü–∞</th>
                        <th class="text-nowrap">–î–∞—Ç–∞ –∏–∑–º–µ–Ω–µ–Ω–∏—è</th>
                        <th class="text-nowrap text-center">–¢–ù<br>–≤–ª–∞–¥–µ–ª—å—Ü–∞</th>
                        <th class="text-nowrap text-center">–û–ø–µ—Ä–∞—Ü–∏–∏</th>
                    </tr>
                    </thead>
                    <tbody>

                    {{ range .Performers }}
                    <tr id="performer-{{ .Id }}" data-id="{{ .Id }}">
                        <td class="fw-semibold">{{ .Id }}</td>
                        <td>{{ .FIO }}</td>
                        <td>{{ .BC }}</td>
                        <td>{{ .Pass }}</td>

                        <!-- –†–æ–ª—å Forms - –æ—Ç–æ–±—Ä–∞–∂–∞–µ–º–∞—è –≤–µ—Ä—Å–∏—è -->
                        <td class="view-mode forms-role">
                            <span class="badge bg-info">
                                {{ $performer := . }}
                                {{ range $.Roles }}
                                {{ if eq .Id $performer.IdRoleAForms }}
                                {{ .Name }}
                                {{ end }}
                                {{ end }}
                            </span>
                        </td>

                        <!-- –†–æ–ª—å FGW - –æ—Ç–æ–±—Ä–∞–∂–∞–µ–º–∞—è –≤–µ—Ä—Å–∏—è -->
                        <td class="view-mode fgw-role">
                            <span class="badge bg-info">
                                {{ $performer := . }}
                                {{ range $.Roles }}
                                {{ if eq .Id $performer.IdRoleAFGW }}
                                {{ .Name }}
                                {{ end }}
                                {{ end }}
                            </span>
                        </td>

                        <!-- –†–æ–ª—å Forms - —Ä–µ–¥–∞–∫—Ç–∏—Ä—É–µ–º–∞—è –≤–µ—Ä—Å–∏—è (—Å–∫—Ä—ã—Ç–∞ –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é) -->
                        <td class="edit-mode" style="display: none;">
                            <label>
                                <select class="form-select form-select-sm role-forms-select" name="idRoleAForms"
                                        data-original="{{ .IdRoleAForms }}">
                                    {{ $performer := . }}
                                    {{ range $.Roles }}
                                    <option value="{{ .Id }}" {{ if eq .Id $performer.IdRoleAForms }}selected{{ end }}>
                                        {{ .Name }}
                                    </option>
                                    {{ end }}
                                </select>
                            </label>
                        </td>

                        <!-- –†–æ–ª—å FGW - —Ä–µ–¥–∞–∫—Ç–∏—Ä—É–µ–º–∞—è –≤–µ—Ä—Å–∏—è (—Å–∫—Ä—ã—Ç–∞ –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é) -->
                        <td class="edit-mode" style="display: none;">
                            <label>
                                <select class="form-select form-select-sm role-fgw-select" name="idRoleAFGW"
                                        data-original="{{ .IdRoleAFGW }}">
                                    {{ $performer := . }}
                                    {{ range $.Roles }}
                                    <option value="{{ .Id }}" {{ if eq .Id $performer.IdRoleAFGW }}selected{{ end }}>
                                        {{ .Name }}
                                    </option>
                                    {{ end }}
                                </select>
                            </label>
                        </td>

                        <td>
                            {{ if .Archive }}
                            <span class="badge bg-warning">–ê—Ä—Ö–∏–≤–Ω—ã–π</span>
                            {{ else }}
                            <span class="badge bg-success">–ê–∫—Ç–∏–≤–Ω—ã–π</span>
                            {{ end }}
                        </td>
                        <td>{{ formatDateTime .AuditRec.CreatedAt }}</td>
                        <td>{{ .AuditRec.CreatedBy }}</td>
                        <td class="update-at">{{ formatDateTime .AuditRec.UpdatedAt }}</td>
                        <td class="update-by">{{ .AuditRec.UpdatedBy }}</td>

                        <!-- –ö–Ω–æ–ø–∫–∏ –æ–ø–µ—Ä–∞—Ü–∏–π -->
                        <td>
                            <div class="d-flex justify-content-center gap-2">
                                <!-- –ö–Ω–æ–ø–∫–∞ —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è (–æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç—Å—è –≤ view-mode) -->
                                <button class="btn btn-sm btn-outline-primary edit-btn"
                                        title="–†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å">
                                    <span>‚úèÔ∏è</span>
                                </button>

                                <!-- –ö–Ω–æ–ø–∫–∏ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è/–æ—Ç–º–µ–Ω—ã (—Å–∫—Ä—ã—Ç—ã –≤ view-mode) -->
                                <div class="edit-buttons" style="display: none;">
                                    <button class="btn btn-sm btn-success save-btn" title="–°–æ—Ö—Ä–∞–Ω–∏—Ç—å">
                                        <span>‚úì</span>
                                    </button>
                                    <button class="btn btn-sm btn-secondary cancel-btn" title="–û—Ç–º–µ–Ω–∞">
                                        <span>‚úó</span>
                                    </button>
                                </div>
                            </div>
                        </td>
                    </tr>
                    {{ end }}
                    </tbody>
                </table>
            </div>
        </div>

        {{ else }}
        <!-- –°–æ–æ–±—â–µ–Ω–∏–µ –∫–æ–≥–¥–∞ –Ω–µ—Ç –¥–∞–Ω–Ω—ã—Ö -->
        <div class="text-center py-5">
            <div class="mb-3">
                <span style="font-size: 3rem;">{{ if .IsSearch }}üîç{{ else }}üë•{{ end }}</span>
            </div>
            <h3 class="text-muted mb-3">
                {{ if .IsSearch }}
                –ü–æ –∑–∞–ø—Ä–æ—Å—É "{{.SearchQuery}}" –Ω–∏—á–µ–≥–æ –Ω–µ –Ω–∞–π–¥–µ–Ω–æ
                {{ else }}
                –°–æ—Ç—Ä—É–¥–Ω–∏–∫–∏ –Ω–µ –Ω–∞–π–¥–µ–Ω—ã
                {{ end }}
            </h3>
            {{ if .IsSearch }}
            <p class="text-muted mb-4">–ü–æ–ø—Ä–æ–±—É–π—Ç–µ –∏–∑–º–µ–Ω–∏—Ç—å –∑–∞–ø—Ä–æ—Å –∏–ª–∏ –≤–µ—Ä–Ω—É—Ç—å—Å—è –∫–æ –≤—Å–µ–º —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–∞–º</p>
            <a href="/admin/performers" class="btn btn-outline-primary">
                <i class="bi bi-arrow-left"></i> –í–µ—Ä–Ω—É—Ç—å—Å—è –∫–æ –≤—Å–µ–º —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–∞–º
            </a>
            {{ end }}
        </div>
        {{ end }}

    </div>
</div>

<!-- –ü–∞–≥–∏–Ω–∞—Ü–∏—è (–ø–æ–∫–∞–∑—ã–≤–∞–µ–º —Ç–æ–ª—å–∫–æ –µ—Å–ª–∏ –µ—Å—Ç—å —Å—Ç—Ä–∞–Ω–∏—Ü—ã) -->
{{ if and .Pagination.TotalPages (gt .Pagination.TotalCount 0) }}
<nav aria-label="–ù–∞–≤–∏–≥–∞—Ü–∏—è –ø–æ —Å—Ç—Ä–∞–Ω–∏—Ü–∞–º" class="mt-4">
    <ul class="pagination justify-content-center mb-0">
        <!-- –ö–Ω–æ–ø–∫–∞ –ø–µ—Ä–≤–æ–π —Å—Ç—Ä–∞–Ω–∏—Ü—ã (<<) -->
        {{ if gt .Pagination.Page 1 }}
        <li class="page-item">
            <a href="/admin/performers?page=1{{ if .PerformerId }}&performerId={{ .PerformerId }}{{ end }}{{ if .SearchQuery }}&search={{ .SearchQuery }}{{ end }}"
               class="page-link"
               aria-label="–ü–µ—Ä–≤–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞">
                <span aria-hidden="true">&laquo;&laquo;</span>
            </a>
        </li>
        {{ else }}
        <li class="page-item disabled">
            <span class="page-link" aria-hidden="true">&laquo;&laquo;</span>
        </li>
        {{ end }}

        <!-- –ö–Ω–æ–ø–∫–∞ –ø—Ä–µ–¥—ã–¥—É—â–µ–π —Å—Ç—Ä–∞–Ω–∏—Ü—ã (<) -->
        {{ if gt .Pagination.Page 1 }}
        <li class="page-item">
            <a href="/admin/performers?page={{ sub .Pagination.Page 1 }}{{ if .PerformerId }}&performerId={{ .PerformerId }}{{ end }}{{ if .SearchQuery }}&search={{ .SearchQuery }}{{ end }}"
               class="page-link"
               aria-label="–ü—Ä–µ–¥—ã–¥—É—â–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞">
                <span aria-hidden="true">&laquo;</span>
            </a>
        </li>
        {{ else }}
        <li class="page-item disabled">
            <span class="page-link" aria-hidden="true">&laquo;</span>
        </li>
        {{ end }}

        <!-- –ù–æ–º–µ—Ä–∞ —Å—Ç—Ä–∞–Ω–∏—Ü -->
        {{ range .Pagination.Pages }}
        {{ if eq . $.Pagination.Page }}
        <li class="page-item active" aria-current="page">
            <span class="page-link">{{ . }}</span>
        </li>
        {{ else }}
        <li class="page-item">
            <a href="/admin/performers?page={{ . }}{{ if $.PerformerId }}&performerId={{ $.PerformerId }}{{ end }}{{ if $.SearchQuery }}&search={{ $.SearchQuery }}{{ end }}"
               class="page-link">{{ . }}</a>
        </li>
        {{ end }}
        {{ end }}

        <!-- –ö–Ω–æ–ø–∫–∞ —Å–ª–µ–¥—É—é—â–µ–π —Å—Ç—Ä–∞–Ω–∏—Ü—ã (>) -->
        {{ if lt .Pagination.Page .Pagination.TotalPages }}
        <li class="page-item">
            <a href="/admin/performers?page={{ add .Pagination.Page 1 }}{{ if .PerformerId }}&performerId={{ .PerformerId }}{{ end }}{{ if .SearchQuery }}&search={{ .SearchQuery }}{{ end }}"
               class="page-link"
               aria-label="–°–ª–µ–¥—É—é—â–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞">
                <span aria-hidden="true">&raquo;</span>
            </a>
        </li>
        {{ else }}
        <li class="page-item disabled">
            <span class="page-link" aria-hidden="true">&raquo;</span>
        </li>
        {{ end }}

        <!-- –ö–Ω–æ–ø–∫–∞ –ø–æ—Å–ª–µ–¥–Ω–µ–π —Å—Ç—Ä–∞–Ω–∏—Ü—ã (>>) -->
        {{ if lt .Pagination.Page .Pagination.TotalPages }}
        <li class="page-item">
            <a href="/admin/performers?page={{ .Pagination.TotalPages }}{{ if .PerformerId }}&performerId={{ .PerformerId }}{{ end }}{{ if .SearchQuery }}&search={{ .SearchQuery }}{{ end }}"
               class="page-link"
               aria-label="–ü–æ—Å–ª–µ–¥–Ω—è—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞">
                <span aria-hidden="true">&raquo;&raquo;</span>
            </a>
        </li>
        {{ else }}
        <li class="page-item disabled">
            <span class="page-link" aria-hidden="true">&raquo;&raquo;</span>
        </li>
        {{ end }}
    </ul>

    <!-- –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ —Ç–µ–∫—É—â–µ–π —Å—Ç—Ä–∞–Ω–∏—Ü–µ -->
    <div class="text-center text-muted small mt-2">
        –°—Ç—Ä–∞–Ω–∏—Ü–∞ {{ .Pagination.Page }} –∏–∑ {{ .Pagination.TotalPages }}
    </div>
</nav>
{{ end }}

{{ end }}