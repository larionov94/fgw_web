{{define "performers_content"}}
<div class="container">
    <h1>{{.Title}}</h1>

    {{if .Performers}}
    <table class="performers-table">
        <thead>
        <tr>
            <th>ИД</th>
            <th>ФИО</th>
            <th>Код доступа</th>
            <th>Пароль</th>
            <th>Роль Forms</th>
            <th>Роль FGW</th>
            <th>Статус</th>
            <th>Дата создания</th>
            <th>ТН<br> владельца</th>
            <th>Дата изменения</th>
            <th>ТН<br> владельца</th>
            <th>Операции</th>
        </tr>
        </thead>
        <tbody>
        {{range .Performers}}
        <tr id="performer_{{ .Id }}" {{if .Archive}}class="archive" {{end}}>
            <td>{{ .Id }}</td>
            {{if .IsEditing}}
            <form method="POST" action="/admin/performers/upd">
                <td>{{.FIO}}</td>
                <td>{{.BC}}</td>
                <td>{{.Pass}}</td>
                <td>
                    <label>
                        <select name="idRoleAForms">
                            {{ $performer := . }}
                            {{ range $.Roles }}
                            <option value="{{ .Id }}"
                                    {{ if eq .Id $performer.IdRoleAForms }}selected{{ end }}>{{ .Name }}
                            </option>
                            {{ end }}
                        </select>
                    </label>
                </td>
                <td>
                    <label>
                        <select name="idRoleAFGW">
                            {{ $performer := . }}
                            {{ range $.Roles }}
                            <option value="{{ .Id }}"
                                    {{ if eq .Id $performer.IdRoleAFGW }}selected{{ end }}>{{ .Name }}
                            </option>
                            {{ end }}
                        </select>
                    </label>
                </td>
                <td class="{{if .Archive}}status-archive{{else}}status-active{{end}}">
                    {{if .Archive}}Архивный{{else}}Активный{{end}}
                </td>
                <td>{{formatDateTime .AuditRec.CreatedAt}}</td>
                <td>{{ .AuditRec.CreatedBy}}</td>
                <td>{{formatDateTime .AuditRec.UpdatedAt}}</td>
                <td>{{ .AuditRec.UpdatedBy}}</td>
                <td>
                    <input type="hidden" name="performerId" value="{{ .Id}}">
                    <input class="save-btn" type="submit" value="Сохранить">
                </td>
            </form>
            {{ else }}
            <td>{{.FIO}}</td>
            <td>{{.BC}}</td>
            <td>{{.Pass}}</td>
            <td>
                {{ $performer := . }}
                    {{ range $.Roles }}
                        {{ if eq .Id $performer.IdRoleAForms }}
                        {{ .Name }}
                    {{ end }}
                {{ end }}
            </td>
            <td>
                {{ $performer := . }}
                    {{ range $.Roles }}
                        {{ if eq .Id $performer.IdRoleAFGW }}
                        {{ .Name }}
                    {{ end }}
                {{ end }}
            </td>
            <td class="{{if .Archive}}status-archive{{else}}status-active{{end}}">
                {{if .Archive}}Архивный{{else}}Активный{{end}}
            </td>
            <td>{{formatDateTime .AuditRec.CreatedAt}}</td>
            <td>{{ .AuditRec.CreatedBy}}</td>
            <td>{{formatDateTime .AuditRec.UpdatedAt}}</td>
            <td>{{ .AuditRec.UpdatedBy}}</td>
            <td>
                <a href="/admin/performers?performerId={{ .Id }}">Изменить</a>
            </td>
            {{end}}
        </tr>
        {{ end }}
        </tbody>
    </table>

    <p style="margin-top: 20px; color: #666;">
        Всего сотрудников: {{len .Performers}}
    </p>
    {{else}}
    <p style="text-align: center; color: #666; font-style: italic;">
        Нет данных о сотрудниках
    </p>
    {{end}}
</div>
{{end}}